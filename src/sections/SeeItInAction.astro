---
const metaphors = [
  { id: 'golf', name: 'Golf', desc: 'You vs the course' },
  { id: 'agile', name: 'Agile', desc: 'Sprints and stories' },
  { id: 'tennis', name: 'Tennis', desc: 'Serve, rally, match point' },
  { id: 'baseball', name: 'Baseball', desc: 'Innings and home runs' },
  { id: 'gaming', name: 'Gaming', desc: 'XP and boss fights' },
  { id: 'dnd', name: 'D&D', desc: 'Quests and encounters' },
  { id: 'matrix', name: 'Matrix', desc: 'Red pill, blue pill' },
];
---

<section id="see-it-in-action" class="py-24 sm:py-32 bg-bg-surface/30">
  <div class="max-w-5xl mx-auto px-6">
    <!-- Header -->
    <div class="text-center mb-12" data-reveal>
      <p class="text-emerald text-xs font-mono uppercase tracking-widest mb-3">See It In Action</p>
      <h2 class="font-heading font-bold text-3xl sm:text-4xl mb-4">
        The difference is data.
      </h2>
      <p class="text-text-secondary max-w-2xl mx-auto">
        Without SLOPE, you get a wall of text. With SLOPE, you get structured output — a scorecard, stats, and a clear next step. Switch the vocabulary to see it in your team's language.
      </p>
    </div>

    <!-- Metaphor picker -->
    <div class="grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-7 gap-2 sm:gap-3 mb-10" data-stagger>
      {metaphors.map(({ id, name, desc }) => (
        <button
          data-inline-metaphor={id}
          class:list={[
            'inline-metaphor-pill rounded-lg border p-3 sm:p-4 text-center transition-all cursor-pointer min-h-[44px]',
            id === 'golf'
              ? 'border-emerald/40 bg-emerald/10 text-emerald'
              : 'border-border bg-bg-card text-text-muted hover:border-emerald/20 hover:text-text-secondary',
          ]}
        >
          <div class="font-heading font-bold text-sm">{name}</div>
          <div class="text-[10px] sm:text-xs mt-0.5 opacity-70 leading-tight">{desc}</div>
        </button>
      ))}
    </div>

    <!-- Terminal cards -->
    <div class="grid md:grid-cols-2 gap-6" data-stagger>
      <!-- Without SLOPE -->
      <div class="rounded-xl border border-red-900/30 bg-bg-surface overflow-hidden">
        <div class="flex items-center gap-2 px-4 py-2.5 border-b border-red-900/20 bg-red-950/20">
          <div class="flex gap-1.5">
            <span class="w-2.5 h-2.5 rounded-full bg-red-500/40"></span>
            <span class="w-2.5 h-2.5 rounded-full bg-text-muted/20"></span>
            <span class="w-2.5 h-2.5 rounded-full bg-text-muted/20"></span>
          </div>
          <span class="text-red-400 text-xs font-mono ml-1">Without SLOPE</span>
        </div>
        <div class="p-5 font-mono text-xs text-text-muted leading-relaxed space-y-1">
          <p class="text-red-400/70">ERROR: Agent crashed mid-sprint, no recovery point</p>
          <p>$ git log --oneline | wc -l → 47 commits, no pattern</p>
          <p class="text-red-400/70">WARN: Same bug as 3 sprints ago</p>
          <p>$ how many tests? → "not sure, maybe 200?"</p>
          <p class="text-red-400/70">ERROR: Context lost on compaction</p>
          <p>$ what improved? → "hard to say"</p>
          <p class="text-text-muted/40">... (scrolls for 500 more lines)</p>
        </div>
      </div>

      <!-- With SLOPE -->
      <div class="rounded-xl border border-emerald/20 bg-bg-surface overflow-hidden">
        <div class="flex items-center gap-2 px-4 py-2.5 border-b border-emerald/10 bg-emerald/5">
          <div class="flex gap-1.5">
            <span class="w-2.5 h-2.5 rounded-full bg-emerald/40"></span>
            <span class="w-2.5 h-2.5 rounded-full bg-text-muted/20"></span>
            <span class="w-2.5 h-2.5 rounded-full bg-text-muted/20"></span>
          </div>
          <span class="text-emerald text-xs font-mono ml-1">With SLOPE</span>
        </div>
        <div class="p-5 font-mono text-[11px] leading-relaxed space-y-2">
          <!-- Sprint header -->
          <p class="text-text-muted">── <span data-term="vocabulary.sprint">Hole</span> 28 ────────────────────</p>
          <p class="text-text-secondary">"The Pro Tour" │ <span data-term="vocabulary.par">Par</span> 4</p>

          <!-- Ticket table -->
          <div class="overflow-x-auto">
            <table class="w-full text-[11px] font-mono border-collapse">
              <thead>
                <tr class="text-text-muted">
                  <th class="text-left pr-2 pb-1 font-normal">#</th>
                  <th class="text-left pr-3 pb-1 font-normal"><span data-term="vocabulary.ticket">Shot</span></th>
                  <th class="text-left pr-3 pb-1 font-normal"><span data-term="vocabulary.club">Club</span></th>
                  <th class="text-left pr-2 pb-1 font-normal">Result</th>
                  <th class="text-right pb-1 font-normal">Hz</th>
                </tr>
              </thead>
              <tbody class="text-text-secondary">
                <tr>
                  <td class="pr-2 py-0.5 text-text-muted">1</td>
                  <td class="pr-3 py-0.5">Setup & config</td>
                  <td class="pr-3 py-0.5" data-term="clubs.wedge">Wedge</td>
                  <td class="pr-2 py-0.5 text-emerald">✅ <span data-term="shotResults.green">Green</span></td>
                  <td class="text-right py-0.5 text-text-muted">─</td>
                </tr>
                <tr>
                  <td class="pr-2 py-0.5 text-text-muted">2</td>
                  <td class="pr-3 py-0.5">Core feature</td>
                  <td class="pr-3 py-0.5" data-term="clubs.short_iron">Short Iron</td>
                  <td class="pr-2 py-0.5 text-emerald">✅ <span data-term="shotResults.fairway">Fairway</span></td>
                  <td class="text-right py-0.5 text-text-muted">─</td>
                </tr>
                <tr>
                  <td class="pr-2 py-0.5 text-text-muted">3</td>
                  <td class="pr-3 py-0.5">Integration</td>
                  <td class="pr-3 py-0.5" data-term="clubs.long_iron">Long Iron</td>
                  <td class="pr-2 py-0.5 text-gold">⚠ <span data-term="hazards.bunker">Bunker</span></td>
                  <td class="text-right py-0.5 text-gold">1</td>
                </tr>
                <tr>
                  <td class="pr-2 py-0.5 text-text-muted">4</td>
                  <td class="pr-3 py-0.5">Tests & docs</td>
                  <td class="pr-3 py-0.5" data-term="clubs.putter">Putter</td>
                  <td class="pr-2 py-0.5 text-emerald">⭐ <span data-term="shotResults.in_the_hole">Hole!</span></td>
                  <td class="text-right py-0.5 text-text-muted">─</td>
                </tr>
              </tbody>
            </table>
          </div>

          <!-- Stats line -->
          <div class="border-t border-border/30 pt-2 space-y-1">
            <p class="text-text-secondary">Score: <span class="text-emerald">4</span> (<span class="text-emerald" data-term="scoreLabels.par">Par</span>) │ <span data-term="vocabulary.handicap">Handicap</span>: <span class="text-emerald">1.2</span> <span class="text-emerald/60">↓</span></p>
            <p class="text-text-muted"><span data-term="statLabels.fairways">FW</span>: 100% <span class="text-text-muted/40">·</span> <span data-term="statLabels.gir">GIR</span>: 75% <span class="text-text-muted/40">·</span> <span data-term="statLabels.putts">Putts</span>: 0.25</p>
          </div>

          <!-- Ask user prompt -->
          <div class="border-t border-border/30 pt-2">
            <p class="text-text-secondary"><span data-term="vocabulary.sprint">Hole</span> complete. What next?</p>
            <div class="mt-1.5 space-y-0.5">
              <div class="flex items-center gap-2"><span class="text-emerald">❯</span><span class="text-text-primary bg-emerald/10 px-2 py-0.5 rounded">Plan a new <span data-term="vocabulary.sprint">hole</span></span></div>
              <div class="flex items-center gap-2"><span class="text-text-muted/40">○</span><span class="text-text-muted">Refine the backlog</span></div>
              <div class="flex items-center gap-2"><span class="text-text-muted/40">○</span><span class="text-text-muted">Cleanup / bug fix</span></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  import { initInlineSwitcher } from '../scripts/interactions';
  initInlineSwitcher();
</script>
