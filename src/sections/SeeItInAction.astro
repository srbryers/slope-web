---
const metaphors = [
  { id: 'golf', name: 'Golf', desc: 'You vs the course' },
  { id: 'agile', name: 'Agile', desc: 'Sprints and stories' },
  { id: 'tennis', name: 'Tennis', desc: 'Serve, rally, match point' },
  { id: 'baseball', name: 'Baseball', desc: 'Innings and home runs' },
  { id: 'gaming', name: 'Gaming', desc: 'XP and boss fights' },
  { id: 'dnd', name: 'D&D', desc: 'Quests and encounters' },
  { id: 'matrix', name: 'Matrix', desc: 'Red pill, blue pill' },
];

const scenarios = [
  { id: 'feature', label: 'Feature Build' },
  { id: 'bugfix', label: 'Bug Fix' },
  { id: 'feedback', label: 'Feedback' },
  { id: 'infra', label: 'Infrastructure' },
  { id: 'research', label: 'Research' },
  { id: 'flow', label: 'Flow Mapping' },
  { id: 'test-coverage', label: 'Test Coverage' },
];
---

<section id="see-it-in-action" class="py-24 sm:py-32 bg-bg-surface/30">
  <div class="max-w-5xl mx-auto px-6">
    <!-- Header -->
    <div class="text-center mb-12" data-reveal>
      <p class="text-emerald text-xs font-mono uppercase tracking-widest mb-3">See It In Action</p>
      <h2 class="font-heading font-bold text-3xl sm:text-4xl mb-4">
        The difference is data.
      </h2>
      <p class="text-text-secondary max-w-2xl mx-auto">
        Without SLOPE, you get a wall of text. With SLOPE, you get structured output — a scorecard, stats, and a clear next step. Switch the vocabulary to see it in your team's language.
      </p>
    </div>

    <!-- Metaphor picker -->
    <div class="grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-7 gap-2 sm:gap-3 mb-10" data-stagger>
      {metaphors.map(({ id, name, desc }) => (
        <button
          data-inline-metaphor={id}
          class:list={[
            'inline-metaphor-pill rounded-lg border p-3 sm:p-4 text-center transition-all cursor-pointer min-h-[44px]',
            id === 'golf'
              ? 'border-emerald/40 bg-emerald/10 text-emerald'
              : 'border-border bg-bg-card text-text-muted hover:border-emerald/20 hover:text-text-secondary',
          ]}
        >
          <div class="font-heading font-bold text-sm">{name}</div>
          <div class="text-[10px] sm:text-xs mt-0.5 opacity-70 leading-tight">{desc}</div>
        </button>
      ))}
    </div>

    <!-- Scenario selector -->
    <div class="mb-6" data-reveal>
      <!-- Desktop: pill tabs -->
      <div class="hidden sm:flex items-center gap-1 rounded-lg bg-bg-surface border border-border/50 p-1 overflow-x-auto flex-nowrap">
        {scenarios.map(({ id, label }) => (
          <button
            data-scenario={id}
            class:list={[
              'scenario-tab px-4 py-1.5 rounded-md text-sm font-mono transition-all cursor-pointer whitespace-nowrap',
              id === 'feature'
                ? 'bg-emerald/10 text-emerald border border-emerald/20'
                : 'text-text-muted hover:text-text-secondary border border-transparent',
            ]}
          >
            {label}
          </button>
        ))}
      </div>
      <!-- Mobile: dropdown -->
      <select class="scenario-select sm:hidden w-full rounded-lg border border-border bg-bg-surface text-text-secondary text-sm font-mono px-3 py-2 appearance-none bg-[url('data:image/svg+xml;charset=UTF-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2212%22%20height%3D%2212%22%20viewBox%3D%220%200%2012%2012%22%3E%3Cpath%20fill%3D%22%236b7280%22%20d%3D%22M3%205l3%203%203-3%22%2F%3E%3C%2Fsvg%3E')] bg-no-repeat bg-[right_0.75rem_center]">
        {scenarios.map(({ id, label }) => (
          <option value={id}>{label}</option>
        ))}
      </select>
    </div>

    <!-- ═══════════════════════════════════════════ -->
    <!-- Scenario: Feature Build                     -->
    <!-- ═══════════════════════════════════════════ -->
    <div data-scenario-panel="feature">
    <div class="grid md:grid-cols-2 gap-6" data-stagger>
      <!-- Without SLOPE -->
      <div class="rounded-xl border border-red-900/30 bg-bg-surface overflow-hidden">
        <div class="flex items-center gap-2 px-4 py-2.5 border-b border-red-900/20 bg-red-950/20">
          <div class="flex gap-1.5">
            <span class="w-2.5 h-2.5 rounded-full bg-red-500/40"></span>
            <span class="w-2.5 h-2.5 rounded-full bg-text-muted/20"></span>
            <span class="w-2.5 h-2.5 rounded-full bg-text-muted/20"></span>
          </div>
          <span class="text-red-400 text-xs font-mono ml-1">Without SLOPE</span>
        </div>
        <div class="p-5 font-mono text-xs text-text-muted leading-relaxed space-y-1">
          <p class="text-red-400/70">ERROR: Agent crashed mid-sprint, no recovery point</p>
          <p>$ git log --oneline | wc -l → 47 commits, no pattern</p>
          <p class="text-red-400/70">WARN: Same bug as 3 sprints ago</p>
          <p>$ how many tests? → "not sure, maybe 200?"</p>
          <p class="text-red-400/70">ERROR: Context lost on compaction</p>
          <p>$ what improved? → "hard to say"</p>
          <p class="text-text-muted/40">... (scrolls for 500 more lines)</p>
        </div>
      </div>

      <!-- With SLOPE -->
      <div class="rounded-xl border border-emerald/20 bg-bg-surface overflow-hidden">
        <div class="flex items-center gap-2 px-4 py-2.5 border-b border-emerald/10 bg-emerald/5">
          <div class="flex gap-1.5">
            <span class="w-2.5 h-2.5 rounded-full bg-emerald/40"></span>
            <span class="w-2.5 h-2.5 rounded-full bg-text-muted/20"></span>
            <span class="w-2.5 h-2.5 rounded-full bg-text-muted/20"></span>
          </div>
          <span class="text-emerald text-xs font-mono ml-1">With SLOPE</span>
        </div>
        <div class="p-5 font-mono text-[11px] leading-relaxed space-y-2">
          <p class="text-text-muted">── <span data-term="vocabulary.sprint">Hole</span> 28 ────────────────────</p>
          <p class="text-text-secondary">"User Auth & Session Management" │ <span data-term="vocabulary.par">Par</span> 4</p>

          <div class="overflow-x-auto">
            <table class="w-full text-[11px] font-mono border-collapse">
              <thead>
                <tr class="text-text-muted">
                  <th class="text-left pr-2 pb-1 font-normal">#</th>
                  <th class="text-left pr-3 pb-1 font-normal"><span data-term="vocabulary.ticket">Shot</span></th>
                  <th class="text-left pr-3 pb-1 font-normal"><span data-term="vocabulary.club">Club</span></th>
                  <th class="text-left pr-2 pb-1 font-normal">Result</th>
                  <th class="text-right pb-1 font-normal">Hz</th>
                </tr>
              </thead>
              <tbody class="text-text-secondary">
                <tr>
                  <td class="pr-2 py-0.5 text-text-muted">S28-1</td>
                  <td class="pr-3 py-0.5">Add login endpoint</td>
                  <td class="pr-3 py-0.5" data-term="clubs.wedge">Wedge</td>
                  <td class="pr-2 py-0.5 text-emerald">✅ <span data-term="shotResults.green">Green</span></td>
                  <td class="text-right py-0.5 text-text-muted">─</td>
                </tr>
                <tr>
                  <td class="pr-2 py-0.5 text-text-muted">S28-2</td>
                  <td class="pr-3 py-0.5">JWT token flow</td>
                  <td class="pr-3 py-0.5" data-term="clubs.short_iron">Short Iron</td>
                  <td class="pr-2 py-0.5 text-emerald">✅ <span data-term="shotResults.fairway">Fairway</span></td>
                  <td class="text-right py-0.5 text-text-muted">─</td>
                </tr>
                <tr>
                  <td class="pr-2 py-0.5 text-text-muted">S28-3</td>
                  <td class="pr-3 py-0.5">Session middleware</td>
                  <td class="pr-3 py-0.5" data-term="clubs.long_iron">Long Iron</td>
                  <td class="pr-2 py-0.5 text-gold">⚠ <span data-term="hazards.bunker">Bunker</span></td>
                  <td class="text-right py-0.5 text-gold">1</td>
                </tr>
                <tr>
                  <td class="pr-2 py-0.5 text-text-muted">S28-4</td>
                  <td class="pr-3 py-0.5">Auth guard tests</td>
                  <td class="pr-3 py-0.5" data-term="clubs.putter">Putter</td>
                  <td class="pr-2 py-0.5 text-emerald">⭐ <span data-term="shotResults.in_the_hole">Hole!</span></td>
                  <td class="text-right py-0.5 text-text-muted">─</td>
                </tr>
              </tbody>
            </table>
          </div>

          <div class="border-t border-border/30 pt-2 space-y-1">
            <p class="text-text-secondary">Score: <span class="text-emerald">4</span> (<span class="text-emerald" data-term="scoreLabels.par">Par</span>) │ <span data-term="vocabulary.handicap">Handicap</span>: <span class="text-emerald">1.2</span> <span class="text-emerald/60">↓</span></p>
            <p class="text-text-muted"><span data-term="statLabels.fairways">FW</span>: 100% <span class="text-text-muted/40">·</span> <span data-term="statLabels.gir">GIR</span>: 75% <span class="text-text-muted/40">·</span> <span data-term="statLabels.putts">Putts</span>: 0.25</p>
          </div>

          <div class="border-t border-border/30 pt-2">
            <p class="text-text-secondary"><span data-term="vocabulary.sprint">Hole</span> complete. What next?</p>
            <div class="mt-1.5 space-y-0.5">
              <div class="flex items-center gap-2"><span class="text-emerald">❯</span><span class="text-text-primary bg-emerald/10 px-2 py-0.5 rounded">Plan a new <span data-term="vocabulary.sprint">hole</span></span></div>
              <div class="flex items-center gap-2"><span class="text-text-muted/40">○</span><span class="text-text-muted">Refine the backlog</span></div>
              <div class="flex items-center gap-2"><span class="text-text-muted/40">○</span><span class="text-text-muted">Cleanup / bug fix</span></div>
            </div>
          </div>
        </div>
      </div>
    </div>
    </div>

    <!-- ═══════════════════════════════════════════ -->
    <!-- Scenario: Bug Fix                           -->
    <!-- ═══════════════════════════════════════════ -->
    <div data-scenario-panel="bugfix" class="hidden">
    <div class="grid md:grid-cols-2 gap-6" data-stagger>
      <!-- Without SLOPE -->
      <div class="rounded-xl border border-red-900/30 bg-bg-surface overflow-hidden">
        <div class="flex items-center gap-2 px-4 py-2.5 border-b border-red-900/20 bg-red-950/20">
          <div class="flex gap-1.5">
            <span class="w-2.5 h-2.5 rounded-full bg-red-500/40"></span>
            <span class="w-2.5 h-2.5 rounded-full bg-text-muted/20"></span>
            <span class="w-2.5 h-2.5 rounded-full bg-text-muted/20"></span>
          </div>
          <span class="text-red-400 text-xs font-mono ml-1">Without SLOPE</span>
        </div>
        <div class="p-5 font-mono text-xs text-text-muted leading-relaxed space-y-1">
          <p>$ git log --oneline → "Fixed it" × 12</p>
          <p class="text-red-400/70">WARN: Same flaky test failing for 3 months</p>
          <p>$ why did CI break? → "race condition, I think"</p>
          <p class="text-red-400/70">ERROR: Fix reverted — broke again next week</p>
          <p>$ root cause? → "not sure, tried a few things"</p>
          <p class="text-red-400/70">WARN: No regression test added</p>
          <p class="text-text-muted/40">... (same fix applied 4 times)</p>
        </div>
      </div>

      <!-- With SLOPE -->
      <div class="rounded-xl border border-emerald/20 bg-bg-surface overflow-hidden">
        <div class="flex items-center gap-2 px-4 py-2.5 border-b border-emerald/10 bg-emerald/5">
          <div class="flex gap-1.5">
            <span class="w-2.5 h-2.5 rounded-full bg-emerald/40"></span>
            <span class="w-2.5 h-2.5 rounded-full bg-text-muted/20"></span>
            <span class="w-2.5 h-2.5 rounded-full bg-text-muted/20"></span>
          </div>
          <span class="text-emerald text-xs font-mono ml-1">With SLOPE</span>
        </div>
        <div class="p-5 font-mono text-[11px] leading-relaxed space-y-2">
          <p class="text-text-muted">── <span data-term="vocabulary.sprint">Hole</span> 31 ────────────────────</p>
          <p class="text-text-secondary">"Fix Flaky CI & Race Conditions" │ <span data-term="vocabulary.par">Par</span> 3</p>

          <div class="overflow-x-auto">
            <table class="w-full text-[11px] font-mono border-collapse">
              <thead>
                <tr class="text-text-muted">
                  <th class="text-left pr-2 pb-1 font-normal">#</th>
                  <th class="text-left pr-3 pb-1 font-normal"><span data-term="vocabulary.ticket">Shot</span></th>
                  <th class="text-left pr-3 pb-1 font-normal"><span data-term="vocabulary.club">Club</span></th>
                  <th class="text-left pr-2 pb-1 font-normal">Result</th>
                  <th class="text-right pb-1 font-normal">Hz</th>
                </tr>
              </thead>
              <tbody class="text-text-secondary">
                <tr>
                  <td class="pr-2 py-0.5 text-text-muted">S31-1</td>
                  <td class="pr-3 py-0.5">Isolate race condition</td>
                  <td class="pr-3 py-0.5" data-term="clubs.wedge">Wedge</td>
                  <td class="pr-2 py-0.5 text-emerald">✅ <span data-term="shotResults.fairway">Fairway</span></td>
                  <td class="text-right py-0.5 text-gold">1</td>
                </tr>
                <tr>
                  <td class="pr-2 py-0.5 text-text-muted">S31-2</td>
                  <td class="pr-3 py-0.5">Add mutex lock</td>
                  <td class="pr-3 py-0.5" data-term="clubs.short_iron">Short Iron</td>
                  <td class="pr-2 py-0.5 text-emerald">✅ <span data-term="shotResults.green">Green</span></td>
                  <td class="text-right py-0.5 text-text-muted">─</td>
                </tr>
                <tr>
                  <td class="pr-2 py-0.5 text-text-muted">S31-3</td>
                  <td class="pr-3 py-0.5">Regression test suite</td>
                  <td class="pr-3 py-0.5" data-term="clubs.putter">Putter</td>
                  <td class="pr-2 py-0.5 text-emerald">⭐ <span data-term="shotResults.in_the_hole">Hole!</span></td>
                  <td class="text-right py-0.5 text-text-muted">─</td>
                </tr>
              </tbody>
            </table>
          </div>

          <div class="border-t border-border/30 pt-2 space-y-1">
            <p class="text-text-secondary">Score: <span class="text-emerald">2</span> (<span class="text-emerald" data-term="scoreLabels.birdie">Birdie</span> −1) │ <span data-term="vocabulary.handicap">Handicap</span>: <span class="text-emerald">1.0</span> <span class="text-emerald/60">↓</span></p>
            <p class="text-text-muted"><span data-term="statLabels.fairways">FW</span>: 100% <span class="text-text-muted/40">·</span> <span data-term="statLabels.gir">GIR</span>: 100% <span class="text-text-muted/40">·</span> <span data-term="statLabels.putts">Putts</span>: 0.33</p>
            <p class="text-text-muted">Hz: <span data-term="hazards.rough">Rough</span> ×1 (tech debt)</p>
            <p class="text-text-muted/60">Miss pattern: was going <span data-term="missDirections.short">Short</span> (under-scoped fixes)</p>
          </div>

          <div class="border-t border-border/30 pt-2">
            <p class="text-text-secondary"><span data-term="vocabulary.sprint">Hole</span> complete. What next?</p>
            <div class="mt-1.5 space-y-0.5">
              <div class="flex items-center gap-2"><span class="text-emerald">❯</span><span class="text-text-primary bg-emerald/10 px-2 py-0.5 rounded">Plan a new <span data-term="vocabulary.sprint">hole</span></span></div>
              <div class="flex items-center gap-2"><span class="text-text-muted/40">○</span><span class="text-text-muted">Refine the backlog</span></div>
              <div class="flex items-center gap-2"><span class="text-text-muted/40">○</span><span class="text-text-muted">Review miss patterns</span></div>
            </div>
          </div>
        </div>
      </div>
    </div>
    </div>

    <!-- ═══════════════════════════════════════════ -->
    <!-- Scenario: Feedback                          -->
    <!-- ═══════════════════════════════════════════ -->
    <div data-scenario-panel="feedback" class="hidden">
    <div class="grid md:grid-cols-2 gap-6" data-stagger>
      <!-- Without SLOPE -->
      <div class="rounded-xl border border-red-900/30 bg-bg-surface overflow-hidden">
        <div class="flex items-center gap-2 px-4 py-2.5 border-b border-red-900/20 bg-red-950/20">
          <div class="flex gap-1.5">
            <span class="w-2.5 h-2.5 rounded-full bg-red-500/40"></span>
            <span class="w-2.5 h-2.5 rounded-full bg-text-muted/20"></span>
            <span class="w-2.5 h-2.5 rounded-full bg-text-muted/20"></span>
          </div>
          <span class="text-red-400 text-xs font-mono ml-1">Without SLOPE</span>
        </div>
        <div class="p-5 font-mono text-xs text-text-muted leading-relaxed space-y-1">
          <p>$ deployed fix from last sprint</p>
          <p class="text-red-400/70">WARN: Didn't measure if it helped</p>
          <p>$ same complaints from users a week later</p>
          <p class="text-red-400/70">ERROR: Repeated the same approach 3 times</p>
          <p>$ what changed? → "we shipped the fix"</p>
          <p class="text-red-400/70">WARN: No before/after metrics collected</p>
          <p class="text-text-muted/40">... (cycle continues)</p>
        </div>
      </div>

      <!-- With SLOPE -->
      <div class="rounded-xl border border-emerald/20 bg-bg-surface overflow-hidden">
        <div class="flex items-center gap-2 px-4 py-2.5 border-b border-emerald/10 bg-emerald/5">
          <div class="flex gap-1.5">
            <span class="w-2.5 h-2.5 rounded-full bg-emerald/40"></span>
            <span class="w-2.5 h-2.5 rounded-full bg-text-muted/20"></span>
            <span class="w-2.5 h-2.5 rounded-full bg-text-muted/20"></span>
          </div>
          <span class="text-emerald text-xs font-mono ml-1">With SLOPE</span>
        </div>
        <div class="p-5 font-mono text-[11px] leading-relaxed space-y-2">
          <p class="text-text-muted">── <span data-term="vocabulary.sprint">Hole</span> 34 ────────────────────</p>
          <p class="text-text-secondary">"API Response Format Feedback" │ <span data-term="vocabulary.par">Par</span> 3</p>

          <div class="overflow-x-auto">
            <table class="w-full text-[11px] font-mono border-collapse">
              <thead>
                <tr class="text-text-muted">
                  <th class="text-left pr-2 pb-1 font-normal">#</th>
                  <th class="text-left pr-3 pb-1 font-normal"><span data-term="vocabulary.ticket">Shot</span></th>
                  <th class="text-left pr-3 pb-1 font-normal"><span data-term="vocabulary.club">Club</span></th>
                  <th class="text-left pr-2 pb-1 font-normal">Result</th>
                  <th class="text-right pb-1 font-normal">Hz</th>
                </tr>
              </thead>
              <tbody class="text-text-secondary">
                <tr>
                  <td class="pr-2 py-0.5 text-text-muted">S34-1</td>
                  <td class="pr-3 py-0.5">Review previous miss patterns</td>
                  <td class="pr-3 py-0.5" data-term="clubs.wedge">Wedge</td>
                  <td class="pr-2 py-0.5 text-emerald">✅ <span data-term="shotResults.fairway">Fairway</span></td>
                  <td class="text-right py-0.5 text-text-muted">─</td>
                </tr>
                <tr>
                  <td class="pr-2 py-0.5 text-text-muted">S34-2</td>
                  <td class="pr-3 py-0.5">Adjust API response format</td>
                  <td class="pr-3 py-0.5" data-term="clubs.short_iron">Short Iron</td>
                  <td class="pr-2 py-0.5 text-emerald">✅ <span data-term="shotResults.green">Green</span></td>
                  <td class="text-right py-0.5 text-text-muted">─</td>
                </tr>
                <tr>
                  <td class="pr-2 py-0.5 text-text-muted">S34-3</td>
                  <td class="pr-3 py-0.5">Validate with integration test</td>
                  <td class="pr-3 py-0.5" data-term="clubs.putter">Putter</td>
                  <td class="pr-2 py-0.5 text-emerald">✅ <span data-term="shotResults.green">Green</span></td>
                  <td class="text-right py-0.5 text-text-muted">─</td>
                </tr>
              </tbody>
            </table>
          </div>

          <div class="border-t border-border/30 pt-2 space-y-1">
            <p class="text-text-secondary">Score: <span class="text-emerald">3</span> (<span class="text-emerald" data-term="scoreLabels.par">Par</span>) │ <span data-term="vocabulary.handicap">Handicap</span>: <span class="text-emerald">1.1</span> <span class="text-emerald/60">↓</span></p>
            <p class="text-text-muted"><span data-term="statLabels.fairways">FW</span>: 100% <span class="text-text-muted/40">·</span> <span data-term="statLabels.gir">GIR</span>: 100% <span class="text-text-muted/40">·</span> <span data-term="statLabels.putts">Putts</span>: 0.00</p>
            <p class="text-text-muted/60">Miss pattern corrected from previous <span data-term="vocabulary.sprint">hole</span></p>
          </div>

          <div class="border-t border-border/30 pt-2">
            <p class="text-text-secondary"><span data-term="vocabulary.sprint">Hole</span> complete. What next?</p>
            <div class="mt-1.5 space-y-0.5">
              <div class="flex items-center gap-2"><span class="text-emerald">❯</span><span class="text-text-primary bg-emerald/10 px-2 py-0.5 rounded">Plan a new <span data-term="vocabulary.sprint">hole</span></span></div>
              <div class="flex items-center gap-2"><span class="text-text-muted/40">○</span><span class="text-text-muted">Refine the backlog</span></div>
              <div class="flex items-center gap-2"><span class="text-text-muted/40">○</span><span class="text-text-muted">Review miss patterns</span></div>
            </div>
          </div>
        </div>
      </div>
    </div>
    </div>

    <!-- ═══════════════════════════════════════════ -->
    <!-- Scenario: Infrastructure                    -->
    <!-- ═══════════════════════════════════════════ -->
    <div data-scenario-panel="infra" class="hidden">
    <div class="grid md:grid-cols-2 gap-6" data-stagger>
      <!-- Without SLOPE -->
      <div class="rounded-xl border border-red-900/30 bg-bg-surface overflow-hidden">
        <div class="flex items-center gap-2 px-4 py-2.5 border-b border-red-900/20 bg-red-950/20">
          <div class="flex gap-1.5">
            <span class="w-2.5 h-2.5 rounded-full bg-red-500/40"></span>
            <span class="w-2.5 h-2.5 rounded-full bg-text-muted/20"></span>
            <span class="w-2.5 h-2.5 rounded-full bg-text-muted/20"></span>
          </div>
          <span class="text-red-400 text-xs font-mono ml-1">Without SLOPE</span>
        </div>
        <div class="p-5 font-mono text-xs text-text-muted leading-relaxed space-y-1">
          <p>$ CI takes 45 minutes, nobody knows why</p>
          <p class="text-red-400/70">WARN: Deploy script works on one machine</p>
          <p>$ where are the env vars? → "check 4 different files"</p>
          <p class="text-red-400/70">ERROR: Production deploy failed — missing env var</p>
          <p>$ who changed the pipeline? → "not sure"</p>
          <p class="text-red-400/70">WARN: Config drift between staging and prod</p>
          <p class="text-text-muted/40">... (firefighting continues)</p>
        </div>
      </div>

      <!-- With SLOPE -->
      <div class="rounded-xl border border-emerald/20 bg-bg-surface overflow-hidden">
        <div class="flex items-center gap-2 px-4 py-2.5 border-b border-emerald/10 bg-emerald/5">
          <div class="flex gap-1.5">
            <span class="w-2.5 h-2.5 rounded-full bg-emerald/40"></span>
            <span class="w-2.5 h-2.5 rounded-full bg-text-muted/20"></span>
            <span class="w-2.5 h-2.5 rounded-full bg-text-muted/20"></span>
          </div>
          <span class="text-emerald text-xs font-mono ml-1">With SLOPE</span>
        </div>
        <div class="p-5 font-mono text-[11px] leading-relaxed space-y-2">
          <p class="text-text-muted">── <span data-term="vocabulary.sprint">Hole</span> 35 ────────────────────</p>
          <p class="text-text-secondary">"CI Pipeline & Deploy Overhaul" │ <span data-term="vocabulary.par">Par</span> 4</p>

          <div class="overflow-x-auto">
            <table class="w-full text-[11px] font-mono border-collapse">
              <thead>
                <tr class="text-text-muted">
                  <th class="text-left pr-2 pb-1 font-normal">#</th>
                  <th class="text-left pr-3 pb-1 font-normal"><span data-term="vocabulary.ticket">Shot</span></th>
                  <th class="text-left pr-3 pb-1 font-normal"><span data-term="vocabulary.club">Club</span></th>
                  <th class="text-left pr-2 pb-1 font-normal">Result</th>
                  <th class="text-right pb-1 font-normal">Hz</th>
                </tr>
              </thead>
              <tbody class="text-text-secondary">
                <tr>
                  <td class="pr-2 py-0.5 text-text-muted">S35-1</td>
                  <td class="pr-3 py-0.5">Audit CI pipeline</td>
                  <td class="pr-3 py-0.5" data-term="clubs.wedge">Wedge</td>
                  <td class="pr-2 py-0.5 text-emerald">✅ <span data-term="shotResults.fairway">Fairway</span></td>
                  <td class="text-right py-0.5 text-text-muted">─</td>
                </tr>
                <tr>
                  <td class="pr-2 py-0.5 text-text-muted">S35-2</td>
                  <td class="pr-3 py-0.5">Parallelize test stages</td>
                  <td class="pr-3 py-0.5" data-term="clubs.short_iron">Short Iron</td>
                  <td class="pr-2 py-0.5 text-emerald">✅ <span data-term="shotResults.green">Green</span></td>
                  <td class="text-right py-0.5 text-text-muted">─</td>
                </tr>
                <tr>
                  <td class="pr-2 py-0.5 text-text-muted">S35-3</td>
                  <td class="pr-3 py-0.5">Dockerize deploy</td>
                  <td class="pr-3 py-0.5" data-term="clubs.long_iron">Long Iron</td>
                  <td class="pr-2 py-0.5 text-emerald">✅ <span data-term="shotResults.fairway">Fairway</span></td>
                  <td class="text-right py-0.5 text-text-muted">─</td>
                </tr>
                <tr>
                  <td class="pr-2 py-0.5 text-text-muted">S35-4</td>
                  <td class="pr-3 py-0.5">Consolidate env config</td>
                  <td class="pr-3 py-0.5" data-term="clubs.short_iron">Short Iron</td>
                  <td class="pr-2 py-0.5 text-gold">⚠ <span data-term="hazards.water">Water</span></td>
                  <td class="text-right py-0.5 text-gold">1</td>
                </tr>
              </tbody>
            </table>
          </div>

          <div class="border-t border-border/30 pt-2 space-y-1">
            <p class="text-text-secondary">Score: <span class="text-gold">5</span> (<span class="text-gold" data-term="scoreLabels.bogey">Bogey</span> +1) │ <span data-term="vocabulary.handicap">Handicap</span>: <span class="text-text-secondary">1.3</span> <span class="text-red-400/60">↑</span></p>
            <p class="text-text-muted"><span data-term="statLabels.fairways">FW</span>: 75% <span class="text-text-muted/40">·</span> <span data-term="statLabels.gir">GIR</span>: 75% <span class="text-text-muted/40">·</span> <span data-term="statLabels.putts">Putts</span>: 0.00</p>
            <p class="text-text-muted">Hz: <span data-term="hazards.water">Water</span> ×1 (config drift)</p>
          </div>

          <div class="border-t border-border/30 pt-2">
            <p class="text-text-secondary"><span data-term="vocabulary.sprint">Hole</span> complete. What next?</p>
            <div class="mt-1.5 space-y-0.5">
              <div class="flex items-center gap-2"><span class="text-emerald">❯</span><span class="text-text-primary bg-emerald/10 px-2 py-0.5 rounded">Plan a new <span data-term="vocabulary.sprint">hole</span></span></div>
              <div class="flex items-center gap-2"><span class="text-text-muted/40">○</span><span class="text-text-muted">Refine the backlog</span></div>
              <div class="flex items-center gap-2"><span class="text-text-muted/40">○</span><span class="text-text-muted">Review hazard log</span></div>
            </div>
          </div>
        </div>
      </div>
    </div>
    </div>

    <!-- ═══════════════════════════════════════════ -->
    <!-- Scenario: Research                          -->
    <!-- ═══════════════════════════════════════════ -->
    <div data-scenario-panel="research" class="hidden">
    <div class="grid md:grid-cols-2 gap-6" data-stagger>
      <!-- Without SLOPE -->
      <div class="rounded-xl border border-red-900/30 bg-bg-surface overflow-hidden">
        <div class="flex items-center gap-2 px-4 py-2.5 border-b border-red-900/20 bg-red-950/20">
          <div class="flex gap-1.5">
            <span class="w-2.5 h-2.5 rounded-full bg-red-500/40"></span>
            <span class="w-2.5 h-2.5 rounded-full bg-text-muted/20"></span>
            <span class="w-2.5 h-2.5 rounded-full bg-text-muted/20"></span>
          </div>
          <span class="text-red-400 text-xs font-mono ml-1">Without SLOPE</span>
        </div>
        <div class="p-5 font-mono text-xs text-text-muted leading-relaxed space-y-1">
          <p>$ spent 3 days exploring auth libraries</p>
          <p class="text-red-400/70">WARN: Nothing documented</p>
          <p>$ context lost on agent restart</p>
          <p class="text-red-400/70">ERROR: Started over from scratch</p>
          <p>$ which approach did we pick? → "no decision recorded"</p>
          <p class="text-red-400/70">WARN: 3 days of work, zero artifacts</p>
          <p class="text-text-muted/40">... (research loop restarts)</p>
        </div>
      </div>

      <!-- With SLOPE -->
      <div class="rounded-xl border border-emerald/20 bg-bg-surface overflow-hidden">
        <div class="flex items-center gap-2 px-4 py-2.5 border-b border-emerald/10 bg-emerald/5">
          <div class="flex gap-1.5">
            <span class="w-2.5 h-2.5 rounded-full bg-emerald/40"></span>
            <span class="w-2.5 h-2.5 rounded-full bg-text-muted/20"></span>
            <span class="w-2.5 h-2.5 rounded-full bg-text-muted/20"></span>
          </div>
          <span class="text-emerald text-xs font-mono ml-1">With SLOPE</span>
        </div>
        <div class="p-5 font-mono text-[11px] leading-relaxed space-y-2">
          <p class="text-text-muted">── <span data-term="vocabulary.sprint">Hole</span> 36 ────────────────────</p>
          <p class="text-text-secondary">"Auth Library Evaluation" │ <span data-term="vocabulary.par">Par</span> 3</p>

          <div class="overflow-x-auto">
            <table class="w-full text-[11px] font-mono border-collapse">
              <thead>
                <tr class="text-text-muted">
                  <th class="text-left pr-2 pb-1 font-normal">#</th>
                  <th class="text-left pr-3 pb-1 font-normal"><span data-term="vocabulary.ticket">Shot</span></th>
                  <th class="text-left pr-3 pb-1 font-normal"><span data-term="vocabulary.club">Club</span></th>
                  <th class="text-left pr-2 pb-1 font-normal">Result</th>
                  <th class="text-right pb-1 font-normal">Hz</th>
                </tr>
              </thead>
              <tbody class="text-text-secondary">
                <tr>
                  <td class="pr-2 py-0.5 text-text-muted">S36-1</td>
                  <td class="pr-3 py-0.5">Survey auth approaches</td>
                  <td class="pr-3 py-0.5" data-term="clubs.wedge">Wedge</td>
                  <td class="pr-2 py-0.5 text-emerald">✅ <span data-term="shotResults.fairway">Fairway</span></td>
                  <td class="text-right py-0.5 text-text-muted">─</td>
                </tr>
                <tr>
                  <td class="pr-2 py-0.5 text-text-muted">S36-2</td>
                  <td class="pr-3 py-0.5">Prototype JWT flow</td>
                  <td class="pr-3 py-0.5" data-term="clubs.short_iron">Short Iron</td>
                  <td class="pr-2 py-0.5 text-emerald">✅ <span data-term="shotResults.green">Green</span></td>
                  <td class="text-right py-0.5 text-text-muted">─</td>
                </tr>
                <tr>
                  <td class="pr-2 py-0.5 text-text-muted">S36-3</td>
                  <td class="pr-3 py-0.5">Write decision doc</td>
                  <td class="pr-3 py-0.5" data-term="clubs.putter">Putter</td>
                  <td class="pr-2 py-0.5 text-emerald">⭐ <span data-term="shotResults.in_the_hole">Hole!</span></td>
                  <td class="text-right py-0.5 text-text-muted">─</td>
                </tr>
              </tbody>
            </table>
          </div>

          <div class="border-t border-border/30 pt-2 space-y-1">
            <p class="text-text-secondary">Score: <span class="text-emerald">2</span> (<span class="text-emerald" data-term="scoreLabels.birdie">Birdie</span> −1) │ <span data-term="vocabulary.handicap">Handicap</span>: <span class="text-emerald">0.9</span> <span class="text-emerald/60">↓</span></p>
            <p class="text-text-muted"><span data-term="statLabels.fairways">FW</span>: 100% <span class="text-text-muted/40">·</span> <span data-term="statLabels.gir">GIR</span>: 100% <span class="text-text-muted/40">·</span> <span data-term="statLabels.putts">Putts</span>: 0.33</p>
          </div>

          <div class="border-t border-border/30 pt-2">
            <p class="text-text-secondary"><span data-term="vocabulary.sprint">Hole</span> complete. What next?</p>
            <div class="mt-1.5 space-y-0.5">
              <div class="flex items-center gap-2"><span class="text-emerald">❯</span><span class="text-text-primary bg-emerald/10 px-2 py-0.5 rounded">Plan a new <span data-term="vocabulary.sprint">hole</span></span></div>
              <div class="flex items-center gap-2"><span class="text-text-muted/40">○</span><span class="text-text-muted">Refine the backlog</span></div>
              <div class="flex items-center gap-2"><span class="text-text-muted/40">○</span><span class="text-text-muted">Implement chosen approach</span></div>
            </div>
          </div>
        </div>
      </div>
    </div>
    </div>

    <!-- ═══════════════════════════════════════════ -->
    <!-- Scenario: Flow Mapping                      -->
    <!-- ═══════════════════════════════════════════ -->
    <div data-scenario-panel="flow" class="hidden">
    <div class="grid md:grid-cols-2 gap-6" data-stagger>
      <!-- Without SLOPE -->
      <div class="rounded-xl border border-red-900/30 bg-bg-surface overflow-hidden">
        <div class="flex items-center gap-2 px-4 py-2.5 border-b border-red-900/20 bg-red-950/20">
          <div class="flex gap-1.5">
            <span class="w-2.5 h-2.5 rounded-full bg-red-500/40"></span>
            <span class="w-2.5 h-2.5 rounded-full bg-text-muted/20"></span>
            <span class="w-2.5 h-2.5 rounded-full bg-text-muted/20"></span>
          </div>
          <span class="text-red-400 text-xs font-mono ml-1">Without SLOPE</span>
        </div>
        <div class="p-5 font-mono text-xs text-text-muted leading-relaxed space-y-1">
          <p>$ user reports broken checkout</p>
          <p class="text-red-400/70">WARN: 5 engineers trace different paths</p>
          <p>$ nobody has the full picture</p>
          <p class="text-red-400/70">ERROR: Fix breaks a different flow</p>
          <p>$ which flows are affected? → "not sure"</p>
          <p class="text-red-400/70">WARN: No flow documentation exists</p>
          <p class="text-text-muted/40">... (whack-a-mole debugging)</p>
        </div>
      </div>

      <!-- With SLOPE -->
      <div class="rounded-xl border border-emerald/20 bg-bg-surface overflow-hidden">
        <div class="flex items-center gap-2 px-4 py-2.5 border-b border-emerald/10 bg-emerald/5">
          <div class="flex gap-1.5">
            <span class="w-2.5 h-2.5 rounded-full bg-emerald/40"></span>
            <span class="w-2.5 h-2.5 rounded-full bg-text-muted/20"></span>
            <span class="w-2.5 h-2.5 rounded-full bg-text-muted/20"></span>
          </div>
          <span class="text-emerald text-xs font-mono ml-1">With SLOPE</span>
        </div>
        <div class="p-5 font-mono text-[11px] leading-relaxed space-y-2">
          <p class="text-text-muted">── <span data-term="vocabulary.sprint">Hole</span> 37 ────────────────────</p>
          <p class="text-text-secondary">"Checkout Flow Mapping" │ <span data-term="vocabulary.par">Par</span> 3</p>

          <div class="overflow-x-auto">
            <table class="w-full text-[11px] font-mono border-collapse">
              <thead>
                <tr class="text-text-muted">
                  <th class="text-left pr-2 pb-1 font-normal">#</th>
                  <th class="text-left pr-3 pb-1 font-normal"><span data-term="vocabulary.ticket">Shot</span></th>
                  <th class="text-left pr-3 pb-1 font-normal"><span data-term="vocabulary.club">Club</span></th>
                  <th class="text-left pr-2 pb-1 font-normal">Result</th>
                  <th class="text-right pb-1 font-normal">Hz</th>
                </tr>
              </thead>
              <tbody class="text-text-secondary">
                <tr>
                  <td class="pr-2 py-0.5 text-text-muted">S37-1</td>
                  <td class="pr-3 py-0.5">Map checkout flow end-to-end</td>
                  <td class="pr-3 py-0.5" data-term="clubs.short_iron">Short Iron</td>
                  <td class="pr-2 py-0.5 text-emerald">✅ <span data-term="shotResults.fairway">Fairway</span></td>
                  <td class="text-right py-0.5 text-text-muted">─</td>
                </tr>
                <tr>
                  <td class="pr-2 py-0.5 text-text-muted">S37-2</td>
                  <td class="pr-3 py-0.5">Identify dead paths</td>
                  <td class="pr-3 py-0.5" data-term="clubs.wedge">Wedge</td>
                  <td class="pr-2 py-0.5 text-emerald">✅ <span data-term="shotResults.green">Green</span></td>
                  <td class="text-right py-0.5 text-text-muted">─</td>
                </tr>
                <tr>
                  <td class="pr-2 py-0.5 text-text-muted">S37-3</td>
                  <td class="pr-3 py-0.5">Add flow assertions</td>
                  <td class="pr-3 py-0.5" data-term="clubs.putter">Putter</td>
                  <td class="pr-2 py-0.5 text-emerald">✅ <span data-term="shotResults.green">Green</span></td>
                  <td class="text-right py-0.5 text-text-muted">─</td>
                </tr>
              </tbody>
            </table>
          </div>

          <div class="border-t border-border/30 pt-2 space-y-1">
            <p class="text-text-secondary">Score: <span class="text-emerald">3</span> (<span class="text-emerald" data-term="scoreLabels.par">Par</span>) │ <span data-term="vocabulary.handicap">Handicap</span>: <span class="text-emerald">1.1</span> <span class="text-emerald/60">↓</span></p>
            <p class="text-text-muted"><span data-term="statLabels.fairways">FW</span>: 100% <span class="text-text-muted/40">·</span> <span data-term="statLabels.gir">GIR</span>: 100% <span class="text-text-muted/40">·</span> <span data-term="statLabels.putts">Putts</span>: 0.00</p>
          </div>

          <div class="border-t border-border/30 pt-2">
            <p class="text-text-secondary"><span data-term="vocabulary.sprint">Hole</span> complete. What next?</p>
            <div class="mt-1.5 space-y-0.5">
              <div class="flex items-center gap-2"><span class="text-emerald">❯</span><span class="text-text-primary bg-emerald/10 px-2 py-0.5 rounded">Plan a new <span data-term="vocabulary.sprint">hole</span></span></div>
              <div class="flex items-center gap-2"><span class="text-text-muted/40">○</span><span class="text-text-muted">Refine the backlog</span></div>
              <div class="flex items-center gap-2"><span class="text-text-muted/40">○</span><span class="text-text-muted">Fix identified dead paths</span></div>
            </div>
          </div>
        </div>
      </div>
    </div>
    </div>

    <!-- ═══════════════════════════════════════════ -->
    <!-- Scenario: Test Coverage                     -->
    <!-- ═══════════════════════════════════════════ -->
    <div data-scenario-panel="test-coverage" class="hidden">
    <div class="grid md:grid-cols-2 gap-6" data-stagger>
      <!-- Without SLOPE -->
      <div class="rounded-xl border border-red-900/30 bg-bg-surface overflow-hidden">
        <div class="flex items-center gap-2 px-4 py-2.5 border-b border-red-900/20 bg-red-950/20">
          <div class="flex gap-1.5">
            <span class="w-2.5 h-2.5 rounded-full bg-red-500/40"></span>
            <span class="w-2.5 h-2.5 rounded-full bg-text-muted/20"></span>
            <span class="w-2.5 h-2.5 rounded-full bg-text-muted/20"></span>
          </div>
          <span class="text-red-400 text-xs font-mono ml-1">Without SLOPE</span>
        </div>
        <div class="p-5 font-mono text-xs text-text-muted leading-relaxed space-y-1">
          <p>$ coverage at 34%</p>
          <p class="text-red-400/70">WARN: Added random tests to hit the metric</p>
          <p>$ tests pass but don't catch real bugs</p>
          <p class="text-red-400/70">ERROR: Flaky suite ignored for 2 months</p>
          <p>$ which tests matter? → "all of them, I guess"</p>
          <p class="text-red-400/70">WARN: Coverage up to 60% but regression missed</p>
          <p class="text-text-muted/40">... (coverage theater continues)</p>
        </div>
      </div>

      <!-- With SLOPE -->
      <div class="rounded-xl border border-emerald/20 bg-bg-surface overflow-hidden">
        <div class="flex items-center gap-2 px-4 py-2.5 border-b border-emerald/10 bg-emerald/5">
          <div class="flex gap-1.5">
            <span class="w-2.5 h-2.5 rounded-full bg-emerald/40"></span>
            <span class="w-2.5 h-2.5 rounded-full bg-text-muted/20"></span>
            <span class="w-2.5 h-2.5 rounded-full bg-text-muted/20"></span>
          </div>
          <span class="text-emerald text-xs font-mono ml-1">With SLOPE</span>
        </div>
        <div class="p-5 font-mono text-[11px] leading-relaxed space-y-2">
          <p class="text-text-muted">── <span data-term="vocabulary.sprint">Hole</span> 38 ────────────────────</p>
          <p class="text-text-secondary">"Targeted Test Coverage" │ <span data-term="vocabulary.par">Par</span> 4</p>

          <div class="overflow-x-auto">
            <table class="w-full text-[11px] font-mono border-collapse">
              <thead>
                <tr class="text-text-muted">
                  <th class="text-left pr-2 pb-1 font-normal">#</th>
                  <th class="text-left pr-3 pb-1 font-normal"><span data-term="vocabulary.ticket">Shot</span></th>
                  <th class="text-left pr-3 pb-1 font-normal"><span data-term="vocabulary.club">Club</span></th>
                  <th class="text-left pr-2 pb-1 font-normal">Result</th>
                  <th class="text-right pb-1 font-normal">Hz</th>
                </tr>
              </thead>
              <tbody class="text-text-secondary">
                <tr>
                  <td class="pr-2 py-0.5 text-text-muted">S38-1</td>
                  <td class="pr-3 py-0.5">Identify uncovered critical paths</td>
                  <td class="pr-3 py-0.5" data-term="clubs.wedge">Wedge</td>
                  <td class="pr-2 py-0.5 text-emerald">✅ <span data-term="shotResults.fairway">Fairway</span></td>
                  <td class="text-right py-0.5 text-text-muted">─</td>
                </tr>
                <tr>
                  <td class="pr-2 py-0.5 text-text-muted">S38-2</td>
                  <td class="pr-3 py-0.5">Add payment flow tests</td>
                  <td class="pr-3 py-0.5" data-term="clubs.short_iron">Short Iron</td>
                  <td class="pr-2 py-0.5 text-emerald">✅ <span data-term="shotResults.green">Green</span></td>
                  <td class="text-right py-0.5 text-text-muted">─</td>
                </tr>
                <tr>
                  <td class="pr-2 py-0.5 text-text-muted">S38-3</td>
                  <td class="pr-3 py-0.5">Add auth edge cases</td>
                  <td class="pr-3 py-0.5" data-term="clubs.short_iron">Short Iron</td>
                  <td class="pr-2 py-0.5 text-emerald">✅ <span data-term="shotResults.green">Green</span></td>
                  <td class="text-right py-0.5 text-text-muted">─</td>
                </tr>
                <tr>
                  <td class="pr-2 py-0.5 text-text-muted">S38-4</td>
                  <td class="pr-3 py-0.5">Fix flaky assertions</td>
                  <td class="pr-3 py-0.5" data-term="clubs.putter">Putter</td>
                  <td class="pr-2 py-0.5 text-emerald">✅ <span data-term="shotResults.fairway">Fairway</span></td>
                  <td class="text-right py-0.5 text-text-muted">─</td>
                </tr>
              </tbody>
            </table>
          </div>

          <div class="border-t border-border/30 pt-2 space-y-1">
            <p class="text-text-secondary">Score: <span class="text-emerald">4</span> (<span class="text-emerald" data-term="scoreLabels.par">Par</span>) │ <span data-term="vocabulary.handicap">Handicap</span>: <span class="text-emerald">1.0</span> <span class="text-emerald/60">↓</span></p>
            <p class="text-text-muted"><span data-term="statLabels.fairways">FW</span>: 100% <span class="text-text-muted/40">·</span> <span data-term="statLabels.gir">GIR</span>: 100% <span class="text-text-muted/40">·</span> <span data-term="statLabels.putts">Putts</span>: 0.00</p>
          </div>

          <div class="border-t border-border/30 pt-2">
            <p class="text-text-secondary"><span data-term="vocabulary.sprint">Hole</span> complete. What next?</p>
            <div class="mt-1.5 space-y-0.5">
              <div class="flex items-center gap-2"><span class="text-emerald">❯</span><span class="text-text-primary bg-emerald/10 px-2 py-0.5 rounded">Plan a new <span data-term="vocabulary.sprint">hole</span></span></div>
              <div class="flex items-center gap-2"><span class="text-text-muted/40">○</span><span class="text-text-muted">Refine the backlog</span></div>
              <div class="flex items-center gap-2"><span class="text-text-muted/40">○</span><span class="text-text-muted">Monitor flaky test trends</span></div>
            </div>
          </div>
        </div>
      </div>
    </div>
    </div>

  </div>
</section>

<script>
  import { initInlineSwitcher } from '../scripts/interactions';
  initInlineSwitcher();

  function initScenarioSwitcher() {
    const tabs = document.querySelectorAll<HTMLButtonElement>('.scenario-tab');
    const select = document.querySelector<HTMLSelectElement>('.scenario-select');
    const panels = document.querySelectorAll<HTMLElement>('[data-scenario-panel]');

    function switchTo(id: string) {
      // Update panels
      panels.forEach(panel => {
        if (panel.dataset.scenarioPanel === id) {
          panel.classList.remove('hidden');
        } else {
          panel.classList.add('hidden');
        }
      });

      // Update tabs
      tabs.forEach(tab => {
        if (tab.dataset.scenario === id) {
          tab.classList.add('bg-emerald/10', 'text-emerald', 'border-emerald/20');
          tab.classList.remove('text-text-muted', 'hover:text-text-secondary', 'border-transparent');
        } else {
          tab.classList.remove('bg-emerald/10', 'text-emerald', 'border-emerald/20');
          tab.classList.add('text-text-muted', 'hover:text-text-secondary', 'border-transparent');
        }
      });

      // Sync dropdown
      if (select) select.value = id;
    }

    tabs.forEach(tab => {
      tab.addEventListener('click', () => {
        if (tab.dataset.scenario) switchTo(tab.dataset.scenario);
      });
    });

    if (select) {
      select.addEventListener('change', () => switchTo(select.value));
    }
  }

  initScenarioSwitcher();
</script>
