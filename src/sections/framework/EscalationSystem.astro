---
import { ESCALATION_TRIGGERS } from '../../data/framework';
---

<!-- Escalation System -->
<section class="mb-16">
  <h2 class="font-heading font-bold text-2xl mb-4 text-text-primary">Escalation System</h2>
  <p class="text-text-secondary mb-6">SLOPE detects when things are going off-track and surfaces warnings before small issues become big ones. Available in both auto-detect and manual modes.</p>

  <div class="rounded-xl border border-border bg-bg-card overflow-hidden mb-6">
    <table class="w-full text-sm">
      <thead>
        <tr class="border-b border-border bg-bg-surface/50">
          <th class="text-left px-5 py-3 text-text-muted text-xs uppercase tracking-wider font-medium">Trigger</th>
          <th class="text-left px-5 py-3 text-text-muted text-xs uppercase tracking-wider font-medium">Severity</th>
          <th class="text-left px-5 py-3 text-text-muted text-xs uppercase tracking-wider font-medium">Action</th>
        </tr>
      </thead>
      <tbody class="divide-y divide-border-subtle">
        {ESCALATION_TRIGGERS.map(({ trigger, severity, action }) => {
          const severityColor = severity === 'High' ? 'text-red-400' : severity === 'Medium' ? 'text-gold' : 'text-text-muted';
          return (
            <tr>
              <td class="px-5 py-3 text-text-primary text-xs">{trigger}</td>
              <td class={`px-5 py-3 font-medium text-xs ${severityColor}`}>{severity}</td>
              <td class="px-5 py-3 text-text-muted text-xs">{action}</td>
            </tr>
          );
        })}
      </tbody>
    </table>
  </div>

  <div class="grid sm:grid-cols-2 gap-3 mb-6">
    <div class="p-4 rounded-lg bg-bg-card border border-border-subtle">
      <div class="text-text-primary text-sm font-medium mb-1">Auto-detect mode</div>
      <p class="text-text-muted text-xs">Run <code class="text-emerald bg-bg-primary px-1 py-0.5 rounded text-[10px]">slope escalate</code> during post-shot or post-hole routines. SLOPE scans the current sprint's data for trigger conditions and surfaces warnings.</p>
    </div>
    <div class="p-4 rounded-lg bg-bg-card border border-border-subtle">
      <div class="text-text-primary text-sm font-medium mb-1">Manual mode</div>
      <p class="text-text-muted text-xs">Agents can manually flag escalation events with severity and context. These feed into the handicap computation and common-issues database.</p>
    </div>
  </div>
</section>
